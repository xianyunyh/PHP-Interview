## IP 协议

> Ip 协议是 TCP/Ip 协议簇中的核心协议，也是 TCP/Ip 的载体。所有的 TCP，UDP，ICMP 及 IGMP 数据都以 Ip 数据报格式传输。Ip 提供 ** 不可靠 ** 的，** 无连接 ** 的数据传送服务。不可靠指它不能保证 Ip 数据报能成功到达目的地 

不可靠（unreliable）的意思是它不能保证 Ip 数据报能成功地到达目的地。Ip 仅提供最好的传输服务。如果发生某种错误时，如某个路由器暂时用完了缓冲区，Ip 有一个简单的错误处理算法：丢弃该数据报，然后发送 ICMP 消息报给信源端。任何要求的可靠性必须由上层来提供（如 TCP）。无连接（connectionless）这个术语的意思是 Ip 并不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独立的。这也说明，Ip 数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报（先是 A，然后是 B），每个数据报都是独立地进行路由选择，可能选择不同的路线，因此 B 可能在 A 到达之前先到达。![img](HTTP://blog.chinaunix.net/attachment/201304/27/26833883_1367053079KNJe.png)



## Ip 报文介绍

![(../MQ/images/52im_1.png)](HTTP://docs.52im.net/extend/docs/book/tcpip/vol1/3/images2/52im_1.png) 

- 4 位版本号。包含 Ip 数据报的版本号：ipv4 为 4，ipv6 为 6 
- 4 位首部长度
- 8 位服务类型
- 16 位总长度
- 标识字段：长度为 16 位，最多分配的 ID 值为 65535 个 

​	



### Ip 地址分类

IPV4 被分为五大类：Abcde

A 类为：点分四组中的第一组地址范围为 0~127 的 Ip 地址。已二进制来看就是“首位为 0”B 类：128~191. 二进制首位为 10

C 类：192~223. 二进制首位为 110

D 类：224~239. 二进制首位为 1110

E 类：240~255. 二进制首位为 1111